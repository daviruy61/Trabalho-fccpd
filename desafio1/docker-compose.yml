services:
  # Serviço responsável por atuar como servidor HTTP
  web_server_d1:
    image: nginx:alpine
    container_name: desafio1_webserver
    volumes:
      # disponibiliza o arquivo de configuração do Nginx dentro do container
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
    networks:
      - net-desafio1
    expose:
      - "8080"

  # Serviço cliente que realiza chamadas periódicas ao servidor
  requester_d1:
    image: alpine/curl
    container_name: desafio1_requester
    command: /bin/sh -c "while true; do echo 'Enviando chamada HTTP ao servidor...'; curl -s http://web_server_d1:8080; sleep 5; done"
    networks:
      - net-desafio1
    depends_on:
      - web_server_d1

# Definição da rede utilizada pelos containers
networks:
  net-desafio1:
    driver: bridge
